<?php
/**
 * Entry point api.php in the context of a multiversion MediaWiki farm.
 * 
 * @author Sébastien Beyou ~ Seb35 <seb35@seb35.fr>
 * @license GPL-3.0+ GNU General Public License v3.0 ou version ultérieure
 * @license AGPL-3.0+ GNU Affero General Public License v3.0 ou version ultérieure
 */

# Check the entry point is installed in a multiversion MediaWiki farm
if( basename( dirname( __FILE__ ) ) != 'www' ) exit;

# Configuration of the MediaWiki Farm
$wgMediaWikiFarmCodeDir = dirname( dirname( dirname( __FILE__ ) ) );
$wgMediaWikiFarmConfigDir = '/etc/mediawiki';
$wgMediaWikiFarmCacheDir = '/tmp/mw-cache';
@include_once dirname( dirname( __FILE__ ) ) . '/config/MediaWikiFarmDirectories.php';

# Include library
// @codingStandardsIgnoreStart MediaWiki.Usage.DirUsage.FunctionFound
require_once dirname( dirname( __FILE__ ) ) . '/src/MediaWikiFarm.php';
// @codingStandardsIgnoreEnd

# Redirect to the requested version
require MediaWikiFarm::load( 'api.php' );
